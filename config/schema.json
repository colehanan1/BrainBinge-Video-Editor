{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "HeyGen Social Clipper Configuration",
  "description": "JSON schema for validating brand configuration files",
  "type": "object",
  "required": ["version", "brand", "captions", "export"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Configuration file version",
      "pattern": "^\\d+\\.\\d+$"
    },
    "brand": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Brand name",
          "minLength": 1
        },
        "logo": {
          "type": "string",
          "description": "Path to logo file"
        },
        "watermark": {
          "type": "string",
          "description": "Path to watermark file"
        },
        "colors": {
          "type": "object",
          "properties": {
            "primary": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "secondary": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "accent": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            }
          }
        }
      }
    },
    "captions": {
      "type": "object",
      "required": ["enabled", "font", "style"],
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "font": {
          "type": "object",
          "required": ["family", "size"],
          "properties": {
            "family": {
              "type": "string"
            },
            "weight": {
              "type": "string",
              "enum": ["normal", "bold", "light", "medium"]
            },
            "size": {
              "type": "integer",
              "minimum": 12,
              "maximum": 200
            }
          }
        },
        "style": {
          "type": "object",
          "properties": {
            "color": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "background_color": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "background_opacity": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "stroke_color": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "stroke_width": {
              "type": "integer",
              "minimum": 0,
              "maximum": 10
            }
          }
        },
        "animation": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["none", "word_highlight", "fade_in", "slide_in"]
            },
            "duration": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            },
            "highlight_color": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            }
          }
        },
        "position": {
          "type": "object",
          "properties": {
            "vertical": {
              "type": "string",
              "enum": ["top", "center", "bottom"]
            },
            "horizontal": {
              "type": "string",
              "enum": ["left", "center", "right"]
            },
            "margin_bottom": {
              "type": "integer",
              "minimum": 0
            }
          }
        }
      }
    },
    "broll": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "sources": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["type", "enabled"],
            "properties": {
              "type": {
                "type": "string",
                "enum": ["pexels", "local"]
              },
              "enabled": {
                "type": "boolean"
              },
              "api_key": {
                "type": "string"
              },
              "path": {
                "type": "string"
              }
            }
          }
        },
        "settings": {
          "type": "object",
          "properties": {
            "min_duration": {
              "type": "number",
              "minimum": 0.5
            },
            "max_duration": {
              "type": "number",
              "minimum": 1
            },
            "transition_type": {
              "type": "string",
              "enum": ["cut", "crossfade", "fade"]
            },
            "transition_duration": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            },
            "opacity": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            }
          }
        },
        "keywords": {
          "type": "object",
          "additionalProperties": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "audio": {
      "type": "object",
      "properties": {
        "music": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "source": {
              "type": "string"
            },
            "volume": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "fade_in": {
              "type": "number",
              "minimum": 0
            },
            "fade_out": {
              "type": "number",
              "minimum": 0
            }
          }
        },
        "processing": {
          "type": "object",
          "properties": {
            "normalize": {
              "type": "boolean"
            },
            "compression": {
              "type": "boolean"
            },
            "voice_volume": {
              "type": "number",
              "minimum": 0,
              "maximum": 2
            }
          }
        }
      }
    },
    "overlays": {
      "type": "object",
      "properties": {
        "logo": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "path": {
              "type": "string"
            },
            "position": {
              "type": "string",
              "enum": ["top_left", "top_right", "bottom_left", "bottom_right"]
            },
            "size": {
              "type": "integer",
              "minimum": 20,
              "maximum": 500
            },
            "margin": {
              "type": "integer",
              "minimum": 0
            },
            "opacity": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            }
          }
        },
        "watermark": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "path": {
              "type": "string"
            },
            "position": {
              "type": "string",
              "enum": ["top_left", "top_right", "bottom_left", "bottom_right"]
            },
            "size": {
              "type": "integer",
              "minimum": 20,
              "maximum": 500
            },
            "opacity": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            }
          }
        }
      }
    },
    "export": {
      "type": "object",
      "required": ["platforms"],
      "properties": {
        "platforms": {
          "type": "object",
          "properties": {
            "instagram": {
              "$ref": "#/definitions/platformConfig"
            },
            "tiktok": {
              "$ref": "#/definitions/platformConfig"
            },
            "youtube": {
              "$ref": "#/definitions/platformConfig"
            }
          }
        },
        "naming": {
          "type": "object",
          "properties": {
            "template": {
              "type": "string"
            }
          }
        },
        "metadata": {
          "type": "object",
          "properties": {
            "generate": {
              "type": "boolean"
            },
            "include_hashtags": {
              "type": "boolean"
            },
            "include_description": {
              "type": "boolean"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "platformConfig": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "resolution": {
          "type": "array",
          "items": {
            "type": "integer"
          },
          "minItems": 2,
          "maxItems": 2
        },
        "fps": {
          "type": "integer",
          "minimum": 24,
          "maximum": 60
        },
        "bitrate": {
          "type": "string",
          "pattern": "^\\d+M$"
        },
        "codec": {
          "type": "string",
          "enum": ["h264", "h265", "hevc"]
        },
        "profile": {
          "type": "string",
          "enum": ["baseline", "main", "high"]
        }
      }
    }
  }
}
